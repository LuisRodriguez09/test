(this["webpackJsonptest-truehome"]=this["webpackJsonptest-truehome"]||[]).push([[0],{74:function(e,t,a){},75:function(e,t,a){"use strict";a.r(t);var c=a(5),n=a(36),r=a.n(n),s=a(19),i=a(35),l=a(49),o=a(14),j="[Cities] Get city",b="[Available] Get cities available",d="[Save] Save reservation",u="[] Set show trip",h="[] Save hour",O={availableCities:{}},m={objReservation:{}},v=a(26),p={cities:[]},x={show:!1},f="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.c,_=Object(i.b)({reservation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return Object(o.a)(Object(o.a)({},e),{},{cities:Object(v.a)(t.payload)});default:return e}},available:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return Object(o.a)(Object(o.a)({},e),{},{availableCities:Object(o.a)({},t.payload)});default:return e}},myReservation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(o.a)(Object(o.a)({},e),{},{objReservation:Object(o.a)({},t.payload)});case h:return Object(o.a)(Object(o.a)({},e),{},{hour:e.payload});default:return e}},show:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return Object(o.a)(Object(o.a)({},e),{},{show:t.payload});default:return e}}}),y=Object(i.d)(_,f(Object(i.a)(l.a))),g=a(51),N=a(13),C=a(11),w=a(23),S=a.n(w),k=a(7),D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(c.useState)(e),a=Object(C.a)(t,2),n=a[0],r=a[1],s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;r(t)},i=function(e){var t=e.target;r(Object(o.a)(Object(o.a)({},n),{},Object(k.a)({},t.name,t.value)))};return[n,i,s]},E=a(3),P=function(e){var t=e.show,a=e.close,c=e.title,n=D({name:"",lastName:"",address:"",email:""}),r=Object(C.a)(n,2),s=r[0],i=r[1],l=s.name,o=s.lastName,j=s.address,b=s.email;return Object(E.jsx)(E.Fragment,{children:t?Object(E.jsx)("div",{className:"modalContainer",onClick:function(){return a()},children:Object(E.jsxs)("div",{className:"modal",onClick:function(e){return e.stopPropagation()},children:[Object(E.jsxs)("header",{className:"modal_header",children:[Object(E.jsxs)("h2",{className:"modal_header-title",children:[" ",c," "]}),Object(E.jsx)("button",{className:"close",onClick:function(){return a()},children:Object(E.jsx)("i",{class:"fa fa-times","aria-hidden":"true"})})]}),Object(E.jsx)("main",{className:"modal_content",children:Object(E.jsxs)("form",{children:[Object(E.jsx)("label",{for:"fname",children:"Nombre(s)"}),Object(E.jsx)("input",{className:"formPayment__input",type:"text",id:"fname",name:"name",placeholder:"Nombre(s)..",onChange:i,value:l}),Object(E.jsx)("label",{for:"fname",children:"Apellidos"}),Object(E.jsx)("input",{className:"formPayment__input",type:"text",id:"fname",name:"lastName",placeholder:"Apellido..",onChange:i,value:o}),Object(E.jsx)("label",{for:"fname",children:"Direcci\xf3n"}),Object(E.jsx)("input",{type:"text",className:"formPayment__input",id:"fname",name:"address",placeholder:"Direcci\xf3n..",onChange:i,value:j}),Object(E.jsx)("label",{for:"fname",children:"Correo electr\xf3nico"}),Object(E.jsx)("input",{type:"text",className:"formPayment__input",id:"fname",name:"email",placeholder:"Correo..",value:b,onChange:i})]})}),Object(E.jsxs)("footer",{className:"modal_footer",children:[Object(E.jsx)("button",{className:"modal-close",onClick:function(){return a()},children:"Volver"}),Object(E.jsx)("button",{className:"submit",onClick:function(){l&&o&&j&&b?(a(),localStorage.clear(),S.a.fire("Success","Gracias por tu compra!","success")):S.a.fire("Error","Por favor rellena todos los campos","error")},children:"Listo!"})]})]})}):null})},R=function(e){var t=e.show,a=e.close,n=e.title,r=JSON.parse(localStorage.getItem("reservas")||"[]"),s=Object(c.useState)(Object(v.a)(r)),i=Object(C.a)(s,2),l=i[0],o=i[1],j=function(e){localStorage.clear();var t=l.filter((function(t){return"".concat(t.originCity,"-").concat(t.destinyCity)!==e.target.value}));o(t),localStorage.setItem("reservas",JSON.stringify(t))},b=Object(c.useState)(!1),d=Object(C.a)(b,2),u=d[0],h=d[1],O=function(){r.length<=0?(h(!1),S.a.fire("Error","No hay reservas en el carrito","info")):h(!u)};var m=function(e,t){var a=[],c={};for(var n in e)c[e[n][t]]=e[n];for(n in c)a.push(c[n]);return a}(l,"id"),p=0;return m.map((function(e){return p+=e.price})),console.log(p),Object(E.jsxs)(E.Fragment,{children:[t?Object(E.jsx)("div",{className:"modalContainer",onClick:function(){return a()},children:Object(E.jsxs)("div",{className:"modal",onClick:function(e){return e.stopPropagation()},children:[Object(E.jsxs)("header",{className:"modal_header",children:[Object(E.jsxs)("h2",{className:"modal_header-title",children:[" ",n," "]}),Object(E.jsx)("button",{className:"close",onClick:function(){return a()},children:Object(E.jsx)("i",{class:"fa fa-times","aria-hidden":"true"})})]}),Object(E.jsxs)("main",{className:"modal_content",children:[Object(E.jsx)("table",{children:Object(E.jsxs)("tbody",{children:[Object(E.jsxs)("tr",{children:[Object(E.jsx)("th",{children:"ID"}),Object(E.jsx)("th",{children:"Origen"}),Object(E.jsx)("th",{children:"Destino"}),Object(E.jsx)("th",{children:"Partida"}),Object(E.jsx)("th",{children:"Regreso"}),Object(E.jsx)("th",{children:"No. Pasajeros"}),Object(E.jsx)("th",{children:"Precio"}),Object(E.jsx)("th",{children:"Editar"})]}),m.map((function(e,t){return Object(E.jsxs)("tr",{children:[Object(E.jsx)("td",{children:t}),Object(E.jsx)("td",{children:e.originCity}),Object(E.jsx)("td",{children:e.destinyCity}),Object(E.jsx)("td",{children:e.departureDate}),Object(E.jsx)("td",{children:e.returnDate}),Object(E.jsx)("td",{children:e.passengers}),Object(E.jsx)("td",{children:e.price}),Object(E.jsx)("td",{className:"edit__booking",children:Object(E.jsx)("button",{className:"booking__button",value:"".concat(e.originCity,"-").concat(e.destinyCity),onClick:function(e){return j(e)},children:"Eliminar"})})]},t)}))]})}),Object(E.jsx)("div",{className:"booking__price-box",children:Object(E.jsxs)("p",{className:"booking__price",children:["$MXM ",p]})})]}),Object(E.jsxs)("footer",{className:"modal_footer",children:[Object(E.jsx)("button",{className:"modal-close",onClick:function(){return a()},children:"Volver"}),Object(E.jsx)("button",{className:"submit",onClick:function(){localStorage.clear(),S.a.fire("Success","Carrito vaciado","info"),a()},children:"Vaciar carrito"}),Object(E.jsx)("button",{className:"submit",onClick:function(){return O()},children:"Pagar"})]})]})}):null,Object(E.jsx)(P,{show:u,close:O,title:"Rellene sus datos"})]})},I=function(){var e=Object(c.useState)(!1),t=Object(C.a)(e,2),a=t[0],n=t[1],r=function(){return n(!a)};return Object(E.jsx)("div",{className:"container",children:Object(E.jsxs)("header",{className:"navbar__header",children:[Object(E.jsx)("h2",{className:"navbar__logo",children:"TrueHome Vuelos"}),Object(E.jsx)("nav",{children:Object(E.jsx)("ul",{className:"nav__links"})}),Object(E.jsx)("a",{className:"cta",href:"/#",children:Object(E.jsx)("button",{className:"navbar__button",onClick:function(){return r()},children:"Mis Reservas"})}),a&&Object(E.jsx)(R,{show:a,close:r,title:"Mis vuelos reservados"})]})})},F=a(0),M=a.n(F),V=a(4),A=function(e){return{type:b,payload:{available:e}}},J=a(50),X=a(25),B=(Object(J.a)({apiKey:"AIzaSyAdALRQhUqMgfnmdS1Uc_Og8SuPqKaw5c0",authDomain:"true-home-fb525.firebaseapp.com",projectId:"true-home-fb525",storageBucket:"true-home-fb525.appspot.com",messagingSenderId:"619418996978",appId:"1:619418996978:web:224fe2e4cc93a18da4406b"}),Object(X.c)()),G=function(){var e=Object(V.a)(M.a.mark((function e(){var t,a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(X.b)(Object(X.a)(B,"cities"));case 2:return t=e.sent,a=[],t.forEach((function(e){a.push(Object(o.a)({id:e.id},e.data()))})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(e){return{type:j,payload:e}},T=function(){var e=Object(V.a)(M.a.mark((function e(t){var a,c,n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(X.a)(B,"cities"),c=[],n=Object(X.d)(a,Object(X.e)("city","==",t)),e.next=5,Object(X.b)(n);case 5:return e.sent.forEach((function(e){c.push({id:e.id,available:e.data().available})})),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(e){return{type:u,payload:e}},q=function(){var e=Object(s.b)();Object(c.useEffect)((function(){e(function(){var e=Object(V.a)(M.a.mark((function e(t){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G();case 2:a=e.sent,t(L(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]);var t=Object(s.c)((function(e){return e.reservation})),a=D({originCity:"",destinyCity:"",departureDate:"",returnDate:"",passengers:""}),n=Object(C.a)(a,3),r=n[0],i=n[1],l=n[2],o=r.originCity,j=r.destinyCity,b=r.departureDate,d=r.returnDate,u=r.passengers,h=function(){var t=Object(V.a)(M.a.mark((function t(a){var c,n,r,s,i,h;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),o&&j&&b&&d&&u){t.next=4;break}return S.a.fire("Error","Rellene todos los campos","error"),t.abrupt("return");case 4:return l(),t.next=7,T(o);case 7:c=t.sent,n=Object(C.a)(c,1),r=n[0],s=r.id,i=r.available,(h=i.filter((function(e){return e===j}))).length<1&&S.a.fire("Error","No hay vuelos disponibles","error"),e(A({id:s,originCity:o,destinyCity:j,departureDate:b,returnDate:d,passengers:u,available:h,price:1300*u})),e(U(!0));case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)("form",{onSubmit:h,children:[Object(E.jsxs)("div",{className:"form__contain",children:[Object(E.jsx)("div",{children:Object(E.jsxs)("select",{name:"originCity",className:"form__select",value:o,onChange:i,children:[Object(E.jsx)("option",{value:"",disabled:!0,children:"Origen"}),t.cities.map((function(e){return Object(E.jsx)("option",{value:e.city,children:e.city},e.id)}))]})}),Object(E.jsx)("div",{children:Object(E.jsxs)("select",{name:"destinyCity",className:"form__select",value:j,onChange:i,children:[Object(E.jsx)("option",{value:"",disabled:!0,children:"Destino"}),t.cities.map((function(e){return Object(E.jsx)("option",{value:e.city,children:e.city},e.id)}))]})}),Object(E.jsx)("div",{children:Object(E.jsx)("input",{className:"form__date",id:"salida",type:"date",name:"departureDate",value:b,onChange:i})}),Object(E.jsx)("div",{children:Object(E.jsx)("input",{className:"form__date",id:"regreso",type:"date",name:"returnDate",value:d,onChange:i})}),Object(E.jsx)("div",{children:Object(E.jsx)("input",{name:"passengers",className:"form__number",type:"number",placeholder:"No. de pasajeros",value:u,onChange:i})})]}),Object(E.jsx)("div",{className:"form__button",children:Object(E.jsx)("button",{type:"submit",className:"form__button-style pointer",children:"Buscar"})})]})})},K=function(e){var t,a,c,n,r,i=e.city1,l=e.city2,o=e.departureDate,j=e.returnDate,b=(e.passengers,e.price),u=Object(s.c)((function(e){return e.available})).availableCities.available,O=Object(s.b)(),m=D({}),v=Object(C.a)(m,2),p=v[0],x=v[1],f=p.opt;return Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)("div",{className:"available__trips",children:[Object(E.jsxs)("div",{className:"available__top",children:[Object(E.jsx)("span",{children:Object(E.jsxs)("h3",{className:"avaialable__h3",children:[i," - ",l," "]})}),Object(E.jsxs)("span",{className:"available__span",children:[Object(E.jsxs)("p",{children:["Fecha de ida: ",o," "]}),Object(E.jsxs)("p",{children:["Fecha de Regreso: ",j," "]})]}),Object(E.jsx)("span",{children:Object(E.jsxs)("h3",{children:["MXN$ ",b]})})]}),Object(E.jsxs)("div",{className:"available__buttom",children:[Object(E.jsxs)("div",{className:"available__left",children:[Object(E.jsx)("p",{children:"Selecciona el horario"}),Object(E.jsxs)("div",{className:"available__box",children:[Object(E.jsx)("input",(t={type:"radio",name:"hour",className:"available__radio"},Object(k.a)(t,"name","opt"),Object(k.a)(t,"value","4:00 - 6:00"),Object(k.a)(t,"onChange",x),t)),Object(E.jsx)("label",{children:"4:00 - 6:00"})]}),Object(E.jsxs)("div",{className:"available__box",children:[Object(E.jsx)("input",(a={type:"radio",name:"hour",className:"available__radio"},Object(k.a)(a,"name","opt"),Object(k.a)(a,"value","6:00 - 8:00"),Object(k.a)(a,"onChange",x),a)),Object(E.jsx)("label",{children:"6:00 - 8:00"})]}),Object(E.jsxs)("div",{className:"available__box",children:[Object(E.jsx)("input",(c={type:"radio",name:"hour",className:"available__radio"},Object(k.a)(c,"name","opt"),Object(k.a)(c,"value","10:00 - 12:00"),Object(k.a)(c,"onChange",x),c)),Object(E.jsx)("label",{children:"10:00 - 12:00"})]}),Object(E.jsxs)("div",{className:"available__box",children:[Object(E.jsx)("input",(n={type:"radio",name:"hour",className:"available__radio"},Object(k.a)(n,"name","opt"),Object(k.a)(n,"value","14:45 - 16:45"),Object(k.a)(n,"onChange",x),n)),Object(E.jsx)("label",{children:"14:45 - 16:45"})]}),Object(E.jsxs)("div",{className:"available__box",children:[Object(E.jsx)("input",(r={type:"radio",name:"hour",className:"available__radio"},Object(k.a)(r,"name","opt"),Object(k.a)(r,"value","16:30 - 18:30"),Object(k.a)(r,"onChange",x),r)),Object(E.jsx)("label",{children:"16:30 - 18:30"})]})]}),Object(E.jsx)("div",{children:Object(E.jsx)("button",{className:"available__button-style",onClick:function(){if(f){O({type:d,payload:u});var e=JSON.parse(localStorage.getItem("reservas")||"[]"),t=u;e.push(t),localStorage.setItem("reservas",JSON.stringify(e)),O(U(!1)),O({type:h,payload:p}),S.a.fire("Succes","Vuelo reservado!","success")}else S.a.fire("Error","Selecciona un horario","error")},children:"Reservar"})})]})]})})},$=function(){var e=Object(s.c)((function(e){return e.available})).availableCities.available,t=Object(s.c)((function(e){return e.show}));return Object(E.jsx)(E.Fragment,{children:t.show?Object(E.jsxs)("div",{style:{backgroundColor:"#f0e5e5"},children:[Object(E.jsx)("h1",{className:"available__title",children:"Vuelos disponibles"}),Object(E.jsx)("div",{children:Object(E.jsx)("div",{className:"available__contain",children:null===e||void 0===e?void 0:e.available.map((function(t,a){return Object(E.jsx)(K,{city1:e.originCity,city2:e.available[a],departureDate:e.departureDate,returnDate:e.returnDate,passengers:e.passengers,price:e.price},a)}))})})]}):null})},z=function(){var e=Object(s.c)((function(e){return e.show}));return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("div",{className:"reservation_main-content",children:Object(E.jsxs)("div",{className:"reservation_box-content",children:[Object(E.jsx)("h2",{className:"reservation_title",children:"Reserva tus boletos"}),Object(E.jsx)(q,{})]})}),e.show?Object(E.jsx)($,{}):null]})},H=function(){return Object(E.jsx)(g.a,{children:Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(I,{}),Object(E.jsx)("div",{children:Object(E.jsx)(N.c,{children:Object(E.jsx)(N.a,{path:"/",component:z})})})]})})},Q=function(){return Object(E.jsx)("div",{children:Object(E.jsx)(s.a,{store:y,children:Object(E.jsx)(H,{})})})};a(74);r.a.render(Object(E.jsx)(Q,{}),document.getElementById("root"))}},[[75,1,2]]]);
//# sourceMappingURL=main.c832bc4f.chunk.js.map